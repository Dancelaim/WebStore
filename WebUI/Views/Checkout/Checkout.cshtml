@model WowCarry.Domain.Entities.Cart

<div id="product-checkout" class="container">
    <div class="row">
        <h1>Checkout</h1>
        <div class="cart-block">
            <h2>Products list</h2>
            @if (Model.Lines.Any())
            {
                 foreach (var item in Model.Lines)
                    {
                    <div class="cart-item">
                        <div class="name-box">
                            @Html.RouteLink(@item.Product.ProductName, "ProductDetails", new { productUrl = item.Product.ProductCEO.UrlKeyWord })
                            <div class="options-list">
                                <span>-option value</span>
                                <span>-option value 2</span>
                            </div>
                        </div>
                        <div class="remove_box"><button type="submit" title="Remove" class="btn btn-xs"></button></div>
                        <div class="price-box">
                            @((item.Quantity * item.Product.ProductPrice.Select(p => p.Price).FirstOrDefault()).ToString())
                            
                        </div>
                        <div class="qty-box">
                            <button class="ve-btn decrease"></button>
                            <input type="text" readonly name="qty-value" value=" @item.Quantity">

                            <button class="ve-btn increase"></button>
                           
                        </div>

                        <div class="clear"></div>
                    </div>
                 }
              

            }
            else
            {
        <div>
            REDIRECT
        </div>
            }


        </div>
        <div class="cart-left-column">
            <h2>Fill in required info</h2>
            <div class="warning-box">
                Warning text
            </div>
            <div class="payment-info-box">
                <h2> Games Info</h2>
                <p> WOW BFA</p>
                <p> WOW Classic</p>
                <p>Path of Exile</p>
            </div>
        </div>
        <div class="cart-right-column">
            <h2>Payment info</h2>
            <div class="payment-box">
                <label for="payment_method">Payment method:</label>
                <select name="payment_method"> <option value="pp_standard" selected="selected" for="pp_standard"> PayPal  </option> </select>
            </div>
            <div class="cupon-box">
                <label for="coupon">Use Coupon Code:</label>
                <input type="text" name="coupon" placeholder="Use Coupon Code"> <button class="ve-btn" type="button">Apply</button>
            </div>
            <div class="carrycoins-box">
                <label for="reward">Use Carrycoins (Available: max carryCoins val)</label>
                <input type="text" name="reward" placeholder="Carrycoins to use (carryCoins val)"> <button class="ve-btn" type="button">Apply</button>
            </div>
            <div class="terms-agree">
                <input type="checkbox" ref="input" value="1" id="terms-agree" name="terms-agree">
                <label for="terms-agree">I have read and agree to the <a href="/terms" target="_blank"><b>Terms &amp; Conditions</b></a></label>
            </div>
            <div class="total-box">
                <div class="total-price-value">
                    <div class="title">Total</div>
                    <div class="price">Price value</div>
                </div>
                <div class="final-price-value">
                    <div class="title">Final Price</div>
                    <div class="price">Final Price value</div>
                </div>
            </div>
            <div class="confirm-box">
                <button class="ve-btn">Confirm Order</button>
            </div>
        </div>
    </div>
</div>
<script>
    $(document).on("click", ".remove_box button", function () {
        var prodId = $(this).closest('.cart-block').find('input').val();
        console.log("Pause");
        $.ajax({
            cache: false,
            type: "POST",
            url: "@Url.Action("RemoveFromCart", "Cart")",
            data: {
                productId: prodId
            },
            success: function (data) {
                $("#cartModal").html(data);
            },
            error: function (xhr, ajaxOptions, thrownError) {
                console.log(thrownError)
            }
        });
    });
</script>
